CREATE TABLE whatsapp_messages (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    message_id TEXT UNIQUE,
    customer_id UUID,
    phone_number TEXT NOT NULL,
    direction TEXT NOT NULL CHECK (direction IN ('incoming',
    'outgoing')),
    message_type TEXT DEFAULT 'text' CHECK (message_type IN ('text',
    'image',
    'document',
    'audio',
    'video')),
    content TEXT,
    media_url TEXT,
    status TEXT DEFAULT 'pending' CHECK (status IN ('pending',
    'sent',
    'delivered',
    'read',
    'failed')),
    response_to UUID,
    automation_triggered BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);